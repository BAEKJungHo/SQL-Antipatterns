# 순진한 트리

## 목표 : 계층구조 저장 및 조회하기

데이터가 재귀적 관계를 가지는 것은 흔한 일이다. 데이터는 트리나 계층적 구조가 될 수 있다. 트리 데이터 구조를 가지는 예에는 다음과 같은 것이 포함된다.

- `조직도`
  - 직원과 관리자의 관계
- `글타래`
  - 답글에 대한 답글

## 안티패턴

### 항상 부모에 의존하기

가장 초보적인 방법은 parent_id 컬럼을 추가해서 같은 테이블 안의 다른 글을 참조 시키는 것이다.

```sql
CREATE TABLE Comments (
  comment_id SERIAL PRIMARY KEY,
  parent_id BIGINT UNSIGNED,
  bug_id BIGNINT UNSIGNED NOT NULL,
  author BIGINT UNSSIGNED NOT NULL,
  comment_date DATETIME NOT NULL,
  comment TEXT NOT NULL,
  FOREIGN KEY (parent_id) REFERENCES Comments(comment_id),
  FOREIGN KEY (bug_id) REFERENCES Bugs(bug_id),
  FOREIGN KEY (author) REFERENCES Accounts(account_id)
);
```
